(function(n){var t=!1,r,i;typeof define=="function"&&define.amd&&(define(n),t=!0);typeof exports=="object"&&(module.exports=n(),t=!0);t||(r=window.Storages,i=window.Storages=n(),i.noConflict=function(){return window.Storages=r,i})})(function(){function e(){var h=this._type,o=arguments.length,u=window[h],i=arguments,r=i[0],f,n,s,t,e;if(o<1)throw new Error("Minimum 1 argument must be given");else{if(Array.isArray(r)){n={};for(t in r)if(r.hasOwnProperty(t)){f=r[t];try{n[f]=JSON.parse(u.getItem(f))}catch(c){n[f]=u.getItem(f)}}return n}if(o==1)try{return JSON.parse(u.getItem(r))}catch(c){return u.getItem(r)}else{try{if(n=JSON.parse(u.getItem(r)),!n)throw new ReferenceError(r+" is not defined in this storage");}catch(c){throw new ReferenceError(r+" is not defined in this storage");}for(t=1;t<o-1;t++)if(n=n[i[t]],n===undefined)throw new ReferenceError([].slice.call(i,0,t+1).join(".")+" is not defined in this storage");if(Array.isArray(i[t])){s=n;n={};for(e in i[t])i[t].hasOwnProperty(e)&&(n[i[t][e]]=s[i[t][e]]);return n}return n[i[t]]}}}function s(){var l=this._type,s=arguments.length,f=window[l],e=arguments,i=e[0],o=e[1],r,h=isNaN(o)?{}:[],c,t,n;if(s<1||!u(i)&&s<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");else{if(u(i)){for(n in i)i.hasOwnProperty(n)&&(r=i[n],u(r)||this.alwaysUseJson?f.setItem(n,JSON.stringify(r)):f.setItem(n,r));return i}if(s==2)return typeof o=="object"||this.alwaysUseJson?f.setItem(i,JSON.stringify(o)):f.setItem(i,o),o;try{t=f.getItem(i);t!=null&&(h=JSON.parse(t))}catch(a){}for(t=h,n=1;n<s-2;n++)r=e[n],c=isNaN(e[n+1])?"object":"array",t[r]&&(c!="object"||u(t[r]))&&(c!="array"||Array.isArray(t[r]))||(t[r]=c=="array"?[]:{}),t=t[r];return t[e[n]]=e[n+1],f.setItem(i,JSON.stringify(h)),h}}function p(){var s=this._type,f=arguments.length,u=window[s],t=arguments,i=t[0],o,r,n,e;if(f<1)throw new Error("Minimum 1 argument must be given");else{if(Array.isArray(i)){for(n in i)i.hasOwnProperty(n)&&u.removeItem(i[n]);return!0}if(f==1)return u.removeItem(i),!0;try{o=r=JSON.parse(u.getItem(i))}catch(h){throw new ReferenceError(i+" is not defined in this storage");}for(n=1;n<f-1;n++)if(r=r[t[n]],r===undefined)throw new ReferenceError([].slice.call(t,1,n).join(".")+" is not defined in this storage");if(Array.isArray(t[n]))for(e in t[n])t[n].hasOwnProperty(e)&&delete r[t[n][e]];else delete r[t[n]];return u.setItem(i,JSON.stringify(o)),!0}}function tt(t){var r=h.call(this);for(var i in r)r.hasOwnProperty(i)&&p.call(this,r[i]);if(t)for(i in n.namespaceStorages)n.namespaceStorages.hasOwnProperty(i)&&k(i)}function w(){var r=arguments.length,f=arguments,i=f[0],n,t;if(r==0)return h.call(this).length==0;if(Array.isArray(i)){for(n=0;n<i.length;n++)if(!w.call(this,i[n]))return!1;return!0}try{t=e.apply(this,arguments);Array.isArray(f[r-1])||(t={totest:t});for(n in t)if(t.hasOwnProperty(n)&&!(u(t[n])&&rt(t[n])||Array.isArray(t[n])&&!t[n].length||typeof t[n]!="boolean"&&!t[n]))return!1;return!0}catch(o){return!0}}function b(){var r=arguments.length,u=arguments,i=u[0],n,t;if(r<1)throw new Error("Minimum 1 argument must be given");if(Array.isArray(i)){for(n=0;n<i.length;n++)if(!b.call(this,i[n]))return!1;return!0}try{t=e.apply(this,arguments);Array.isArray(u[r-1])||(t={totest:t});for(n in t)if(t.hasOwnProperty(n)&&!(t[n]!==undefined&&t[n]!==null))return!1;return!0}catch(f){return!1}}function h(){var f=this._type,o=arguments.length,s=window[f],i=[],n={},r,t,u;if(n=o>0?e.apply(this,arguments):s,n&&n._cookie){r=Cookies.get();for(t in r)r.hasOwnProperty(t)&&t!=""&&i.push(t.replace(n._prefix,""))}else for(u in n)n.hasOwnProperty(u)&&i.push(u);return i}function k(u){if(!u||typeof u!="string")throw new Error("First parameter must be a string");i?(window.localStorage.getItem(u)||window.localStorage.setItem(u,"{}"),window.sessionStorage.getItem(u)||window.sessionStorage.setItem(u,"{}")):(window.localCookieStorage.getItem(u)||window.localCookieStorage.setItem(u,"{}"),window.sessionCookieStorage.getItem(u)||window.sessionCookieStorage.setItem(u,"{}"));var f={localStorage:t({},n.localStorage,{_ns:u}),sessionStorage:t({},n.sessionStorage,{_ns:u})};return r&&(window.cookieStorage.getItem(u)||window.cookieStorage.setItem(u,"{}"),f.cookieStorage=t({},n.cookieStorage,{_ns:u})),n.namespaceStorages[u]=f,f}function it(n){var t="jsapi";try{return window[n]?(window[n].setItem(t,t),window[n].removeItem(t),!0):!1}catch(i){return!1}}function u(n){var t,i;return!n||d.call(n)!=="[object Object]"?!1:(t=nt(n),!t)?!0:(i=l.call(t,"constructor")&&t.constructor,typeof i=="function"&&a.call(i)===g)}function rt(n){for(var t in n)return!1;return!0}function t(){for(var i=1,r=arguments[0],n,t;i<arguments.length;i++){n=arguments[i];for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t])}return r}var c={},d=c.toString,l=c.hasOwnProperty,a=l.toString,g=a.call(Object),nt=Object.getPrototypeOf,n={},v="ls_",y="ss_",i=it("localStorage"),r=typeof Cookies!="undefined",f={_type:"",_ns:"",_callMethod:function(n,t){t=Array.prototype.slice.call(t);var i=[],r=t[0];return this._ns&&i.push(this._ns),typeof r=="string"&&r.indexOf(".")!==-1&&(t.shift(),[].unshift.apply(t,r.split("."))),[].push.apply(i,t),n.apply(this,i)},alwaysUseJson:!1,get:function(){return!i&&!r?null:this._callMethod(e,arguments)},set:function(){var e=arguments.length,o=arguments,n=o[0],t,f;if(e<1||!u(n)&&e<2)throw new Error("Minimum 2 arguments must be given or first parameter must be an object");if(!i&&!r)return null;if(u(n)&&this._ns){for(t in n)n.hasOwnProperty(t)&&this._callMethod(s,[t,n[t]]);return n}return f=this._callMethod(s,o),this._ns?f[n.split(".")[0]]:f},remove:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return!i&&!r?null:this._callMethod(p,arguments)},removeAll:function(n){return!i&&!r?null:this._ns?(this._callMethod(s,[{}]),!0):this._callMethod(tt,[n])},isEmpty:function(){return!i&&!r?null:this._callMethod(w,arguments)},isSet:function(){if(arguments.length<1)throw new Error("Minimum 1 argument must be given");return!i&&!r?null:this._callMethod(b,arguments)},keys:function(){return!i&&!r?null:this._callMethod(h,arguments)}},o;return r&&(window.name||(window.name=Math.floor(Math.random()*1e8)),o={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,_secure:!1,setItem:function(n,t){Cookies.set(this._prefix+n,t,{expires:this._expires,path:this._path,domain:this._domain,secure:this._secure})},getItem:function(n){return Cookies.get(this._prefix+n)},removeItem:function(n){return Cookies.remove(this._prefix+n,{path:this._path})},clear:function(){var t=Cookies.get();for(var n in t)t.hasOwnProperty(n)&&n!=""&&(!this._prefix&&n.indexOf(v)===-1&&n.indexOf(y)===-1||this._prefix&&n.indexOf(this._prefix)===0)&&Cookies.remove(n)},setExpires:function(n){return this._expires=n,this},setPath:function(n){return this._path=n,this},setDomain:function(n){return this._domain=n,this},setSecure:function(n){return this._secure=n,this},setConf:function(n){return n.path&&(this._path=n.path),n.domain&&(this._domain=n.domain),n.secure&&(this._secure=n.secure),n.expires&&(this._expires=n.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null;this._secure=!1}},i||(window.localCookieStorage=t({},o,{_prefix:v,_expires:3650,_secure:!0}),window.sessionCookieStorage=t({},o,{_prefix:y+window.name+"_",_secure:!0})),window.cookieStorage=t({},o),n.cookieStorage=t({},f,{_type:"cookieStorage",setExpires:function(n){return window.cookieStorage.setExpires(n),this},setPath:function(n){return window.cookieStorage.setPath(n),this},setDomain:function(n){return window.cookieStorage.setDomain(n),this},setSecure:function(n){return window.cookieStorage.setSecure(n),this},setConf:function(n){return window.cookieStorage.setConf(n),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})),n.initNamespaceStorage=function(n){return k(n)},i?(n.localStorage=t({},f,{_type:"localStorage"}),n.sessionStorage=t({},f,{_type:"sessionStorage"})):(n.localStorage=t({},f,{_type:"localCookieStorage"}),n.sessionStorage=t({},f,{_type:"sessionCookieStorage"})),n.namespaceStorages={},n.removeAllStorages=function(t){n.localStorage.removeAll(t);n.sessionStorage.removeAll(t);n.cookieStorage&&n.cookieStorage.removeAll(t);t||(n.namespaceStorages={})},n.alwaysUseJsonInStorage=function(t){f.alwaysUseJson=t;n.localStorage.alwaysUseJson=t;n.sessionStorage.alwaysUseJson=t;n.cookieStorage&&(n.cookieStorage.alwaysUseJson=t)},n});